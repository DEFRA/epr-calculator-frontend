@using EPR.Calculator.Frontend.Constants;

@{
    Layout = "_Layout";
    var errors = ViewBag.Errors;
    var BackLink = "DefaultParameters";
  
}

<partial name="_BackLinkPartial" model="BackLink" />


@if (errors != null)
{
    <div class="govuk-error-summary" data-module="govuk-error-summary">
        <div role="alert">
            <h2 class="govuk-error-summary__title">
                There is a problem
            </h2>
            <div class="govuk-error-summary__body">
                <ul class="govuk-list govuk-error-summary__list">
                   
                        <li>
                            <a href="#file-upload-1">@errors.ErrorMessage</a>
                        </li>
                  
                </ul>
            </div>
        </div>
    </div>
}
@if (errors != null)
{
    <h1 class="govuk-heading-l">Upload the file again</h1>
}
else
{
    <h1 class="govuk-heading-l">Upload new default calculator parameters</h1>

    <h2 class="govuk-heading-m">Before you upload your file</h2>
}

<div class="govuk-form-group">
    <p class="govuk-body">Make sure you're using the latest version of the <a class="govuk-link" href="@Url.Action("DownloadCsvTemplate", "UploadFile")">default parameters spreadsheet template</a>.</p>
</div>

@if (errors == null)
{
    <h2 class="govuk-heading-m"><label for="file-upload-1">Upload a file</label></h2>
}

<p class="govuk-body">The file must be:</p>
<ul class="govuk-list govuk-list--bullet">
    <li>smaller than 50KB</li>
    <li>in CSV format</li>
</ul>

<div class="govuk-form-group">
    <p class="govuk-body">It may take a few minutes for your file to upload - do not close the window while the file is uploading.</p>
</div>


@using (Html.BeginForm("Upload", "UploadFile", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div class="@(errors != null ? "govuk-form-group govuk-form-group--error": "govuk-form-group")">
        @if (errors != null)
        {
           
            <p id="file-upload-1-error" class="govuk-error-message">
                <span class="govuk-visually-hidden">Error:</span> @errors.ErrorMessage
        </p>
        }

        <input class="govuk-file-upload form-control" id="file-upload-1" name="fileUpload" validation-class="govuk-input-error" validation-for="file-upload-1" type="file">
    </div>

    <button id="btnUploadFile" type="submit" class="govuk-button" data-module="govuk-button">
        Upload file
    </button>
}
