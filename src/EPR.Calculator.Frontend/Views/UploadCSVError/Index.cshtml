@{
    ViewData["Title"] = "Run the service administrator calculator - Upload CSV Error";
    var validationErrors = ViewBag.ValidationErrors;
    var errors = ViewBag.Errors;
    var BackLink = "UploadFile";
    var defaultError = ViewBag.DefaultError;

}

<partial name="_BackLinkPartial" model="BackLink" />

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <div class="govuk-error-summary" data-module="govuk-error-summary">
            <div role="alert">
                <h2 class="govuk-error-summary__title">
                    There is a problem with your upload
                </h2>
                <div class="govuk-error-summary__body">
                     @if (validationErrors != null)
                        {
                    <ul class="govuk-list govuk-error-summary__list">
                       
                            @foreach (var error in validationErrors)
                            {
                                <li>@error.ErrorMessage</li>
                            }
                        
                    </ul>
                        }

                    @if (defaultError!=null)
                    {
                        <ul class="govuk-list govuk-error-summary__list">
                            <li><a href="#file-upload-1">@defaultError.ErrorMessage</a></li>

                        </ul>
                    }

                </div>
            </div>
        </div>
        
         @if (errors != null)
            {
        <h2 class="govuk-heading-s">You must fix the following errors before you can upload the file:</h2>

        <ol class="govuk-list govuk-list--number">
           
           
                @foreach (var error in errors)
                {
                    <li>@error.Message</li>
                }
            
        </ol>
            }

        <div>
            <label class="govuk-label govuk-label--m govuk-!-margin-top-6" for="file-upload-1" aria-describedby="file-upload-1">
                Upload the file again
            </label>

            @using (Html.BeginForm("Upload", "UploadCSVError", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                <div class="@(defaultError != null ? "govuk-form-group govuk-form-group--error": "govuk-form-group")">
                    @if (defaultError != null)
                    {

                        <p id="file-upload-1-error" class="govuk-error-message">
                            <span class="govuk-visually-hidden">Error:</span> @defaultError.ErrorMessage
                        </p>
                    }
                    <input class="govuk-file-upload form-control" id="file-upload-1" name="fileUpload" type="file">
                </div>

                <button id="btnUploadFile" type="submit" class="govuk-button" data-module="govuk-button">
                    Upload file
                </button>
            }
        </div>
    </div>
</div>
